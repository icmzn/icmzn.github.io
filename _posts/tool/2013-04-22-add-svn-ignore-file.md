---
layout: post
title: SVN版本控制器的简单使用
category: 工具
tags: SVN
description: 多人协作开发使用版本控制器非常便捷，所以有些项目用SVN来控制，要回一些基本的使用，便于团队成员之间协作，加快项目推进
---
最近，在提交项目时，意外提交了很多临时性的文件，导致版本库中的项目变得较大，给团队其他成员的代码交互带来不便，再次我深表歉意~~~为了修复好版本库中的项目代码，为自己的不小心负责，我总结一些关于svn的基本使用，也算是给自己上了一课吧！
# SVN的使用

## 提交代码注意的问题

#### 1.提交代码切不可操之过急，一定要小心，谨慎，因为你不是一个人在战斗！

#### 2.保持原子性的提交

1. SVN更新的原则是要随时更新，随时提交，保持本地程序的实时性！必要性我不再啰嗦了。
2. 如果在修改的期间别人也更改了svn的对应文件，那么commit就可能会失败。
	
	注意：如果别人和自己更改的是同一个文件，那么update时会自动进行合并，如果修改的是同一行，那么合并时会产生冲突，这种情况就需要同之前的开发人员联系，两个人一起协商解决冲突，解决冲突之后，需要两人一起测试保证解决冲突之后，程序不会影响其他功能。
	
3. 提交之前，要先更新确认本地无误在提交至版本库。

#### 3.保持原子性的提交

每次提交的间歇尽可能地短，例如在开发功能模块的时候，可以每完成一个小细节功能的测试，就提交一次，在修改bug的时候，每修改掉一个bug并且确认修改了这个bug，也就提交一次。提倡多提交，也就能多为代码添加上保险。
2.
#### 4.提交时注意不要提交本地自动生成的文件

一般配置管理员都会将项目中一些自动生成的文件或者与本地配置环境有关的文件屏蔽提交（例如eclipse中的.classpath文件等）。如果项目中没有进行这方面的配置来强行禁止提交这样的文件，请自觉不要提交这样的文件。提交了这样的文件后，别人在更新后就可能与本地的环境冲突从而影响大家的工作。

#### 5.不要提交不能通过编译的代码

代码在提交之前，首先要确认自己能够在本地编译。如果在代码中使用了第三方类库，要考虑到项目组成员中有些成员可能没有安装相应的第三方类库。

#### 6.不要提交自己不明白的代码

代码在提交入SVN之后，你的代码将被项目成员所分享。如果提交了你不明白的代码，你看不懂，别人也看不懂，如果在以后出现了问题将会成为项目质量的隐患。因此在引入任何第三方代码之前，确保你对这个代码有一个很清晰的了解。

#### 7.提前协调好项目组成员的工作计划

项目经理应该合理分配工作计划。每个成员在准备开始进行某项功能的修改之前，如果有可能，先跟工作小组的成员谈谈自己的修改计划，让大家都能了解你的思想，了解你即将对软件作出的修改，这样能尽可能的减少在开发过程中可能出现的冲突，提高开发效率。同时你也能够在和成员的交流中发现自己之前设计的不足，完善你的设计。

#### 8.对提交的信息采用明晰的标注

在一个项目组中使用SVN，如果提交空的标注或者不确切的标注将会让项目组中其他的成员感到很无奈，项目经理无法很清晰的掌握工作进度，无法清晰的把握此次提交的概要信息。在发现错误后也无法准确的定位引起错误的文件。

#### 9.慎用锁定功能

在项目中要慎用锁定的功能，在你锁定了一个文件之后别人就无法继续修改提交该文件，虽然可以减少冲突的发生率，但是可能会影响项目组中其他人员的工作。平时只有在编辑那些无法合并的文件（例如图片文件，flash文件等）时，才适当的采用锁定操作。

## 使用myeclipse插件 svn 工具

svn status打印五列字符，紧跟一些空格，接着是文件或者目录名。第一列告诉一个文件的状态或它的内容

[Subversion FAQ(常见问题解答)][svn]

[SVN入门指南][svn_about]

[svn_about]:http://www.imooo.com/ruanjiangongcheng/software/702301.htm 
"图文并茂"
[svn]:https://subversion.apache.org/faq.zh.html 
"比较全"

### SVN 文件状态标记含义

	A item ---> 文件、目录或是符号链item预定加入到版本库。
	C item ---> 文件item发生冲突，在从服务器更新时与本地版本发生交迭，在你提交到版本库前，必须手工的解决冲突。
	D item ---> 文件、目录或是符号链item预定从版本库中删除。
	M item ---> 文件item的内容被修改了。
	R item ---> 文件、目录或是符号链item预定将要替换版本库中的item，这意味着这个对象首先要被删除，另外一个同名的对象将要被添加，所有的操作发生在一个修订版本。
	X item ---> 目录没有版本化，但是与Subversion的外部定义关联，关于外部定义，可以看“外部定义”一节。
	? item ---> 文件、目录或是符号链item不在版本控制之下
	! item ---> 文件、目录或是符号链item在版本控制之下，但是已经丢失或者不完整，这可能因为使用非Subversion命令删除造成的，如果是一个目录，有可能是检出或是更新时的中断造成的，使用svn update可以重新从版本库获得文件或者目录，也可以使用svn revert file恢复原来的文件。



### 本地操作对文件的影响
	
	1. 如果你在本地对文件进行了修改，那么该文件的图标就会被打上"*"
	2. 如果你在本地添加了新文件，那么该文件的图标会被打上"？"，并且该文件的上层节点图标会被打上"*"；


#### 简单使用

1. 查看历史修改

	如果你想观察某个文件的修改历史，可以在文件上，点击鼠标右键，按下图所示路径，点击【Local History】，查看文件的版本信息。你可以根据系统提供的文件提交时间，找到你需要的信息。
2. 文件还原

	当你需要对你的修改进行还原时，点击鼠标右键，按下图所示路径，点击【Local History】，查看文件的版本信息的对比。

#### 文件冲突

当两个或更多开发人员对同一个文件的某几行做了修改，就会产生冲突。

解决冲突办法：文件冲突，提交文件产生

1. 多出三个文件，分别是：“.mine”“r(xxx+1)”“r(xxx)”其中xxx为版本号。“.mine”是我要提交的文件，“.r(xxx)”是我是在这个版本文件基础上修改后产生冲突的。“r(xxx+1)”是目前svn服务器最新版本的内容是这样。
2. 我们通过手动处理源文件“.java”，得到自己真实想要上传到svn的文件后。右击Team->标记为解决。默认选择第一个“标记为冲突解决”，点击OK。刚才的三个文件将消失，剩下自己的源文件。

3. 编辑源文件为自己真正想要到svn服务器上的最新版本文件。右击Team->提交，冲突解决。


#### 将项目恢复到以前的某一个版本

1. 最好的的方法就是先删除现有的项目，然后再从SVN服务器中，导入某一个特定的版本。
【import 】-【SVN】-【从SVN检出】-【显示日志】，选出试图导入的版本。
导入后，再删除并断开现有SVN服务器的连接（【team】-【断开连接】-【并且从文件系统中删除】）
再建立新的SVN服务器模块，注意不要使用现有模块名字作为名称，但是：项目的记录信息log就没有了，等于在svn上新建了一个项目。从项目长远里程来看，不好不好~~~

2. 可以在算定理想的项目版本号上，讲项目新建一个分支在版本库中，然后掉主干上的项目，在讲次分支上的项目移到主干的位置，这样，就完成了主干上的版本制定版本号的回滚！！！

---

动乱了版本，好麻烦！！！不过还好，问题及时解决，影响不大!